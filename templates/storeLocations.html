<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Retailer Stores Locations </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script>
        //load municipalilties as per selected region
        $(document).ready(function()
        {
        var $regions=$('#regions'),
            $municipalities=$('#municipalities'),
            $options=$municipalities.find('option');
            $regions.on('change', function()
            {
                $municipalities.html($options.filter('[value="'+this.value+'"]'));

        //sort municipality names alphabetically
        $(function()
        {
        var options = $("#municipalities option");
            options.sort(function(a,b)
            {
                if (a.text > b.text) return 1; // .text for text comparison
                    else if (a.text < b.text) return -1;
                else return 0
            });
        $("#municipalities").html(options);
        });

            }).trigger('change');
        });
    </script>

    <script>
        $(function()
        {
        var options = $("#retailers option");
            options.sort(function(a,b)
            {
             if (a.text > b.text) return 1; // .text for text comparison
                else if (a.text < b.text) return -1;
             else return 0
            });
        $("#retailers").html(options);
        });

        $(function()
        {
        var options = $("#regions option");
            options.sort(function(a,b)
            {
             if (a.text > b.text) return 1; // .text for text comparison
                    else if (a.text < b.text) return -1;
                else return 0
             });
        $("#regions").html(options);
        });

    </script>

</head>
<body>
<h1>Store Locations</h1>
<form action="">
     <label for="retailers">Retailer</label><br>
     <select id="retailers" name="retailers" style="width: 150px;" sort="True">
        <option disabled="true" selected>---Select Retailer---</option>
        {% for result in retailers %}
         <option>{{result.retailer_name}}</option>
        {% endfor %}
     </select>

     <br><br>

     <label for="regions">Region</label><br>
     <select id="regions" name="regions" style="width: 150px;">
        <option disabled="true" selected>---Select Region---</option>
        {% for result in regions %}
         <option value="{{result.region_id}}">{{result.region_name}}</option>
        {% endfor %}
     </select>

    <br><br>

     <label for="municipalities">Municipality</label><br>
     <select id="municipalities" name="municipalities" style="width: 150px;">
        <option disabled="true" selected>---Select Municipality---</option>
        {% for result in municipalities %}
         <option value="{{result.region_id}}">{{result.municipality_name}}</option>
         {% endfor %}

     </select>
</form>
</body>
</html>